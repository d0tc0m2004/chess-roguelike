<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Roguelike</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Loadout Screen -->
    <div class="loadout-screen" id="loadout-screen">
        <div class="loadout-container">
            <h1 class="loadout-title">THE SPARTAN 300</h1>
            <p class="loadout-subtitle">Choose your squad to face the enemy army</p>

            <div class="loadout-army">
                <div class="loadout-slot fixed">
                    <div class="slot-label">COMMANDER</div>
                    <div class="slot-piece">♔</div>
                    <div class="slot-name">King</div>
                    <div class="slot-desc">Must survive at all costs</div>
                </div>

                <div class="loadout-slot selectable" data-slot="1">
                    <div class="slot-label">GUARD 1</div>
                    <div class="slot-piece" id="slot1-piece">♕</div>
                    <div class="slot-select">
                        <select id="slot1-select">
                            <option value="queen">Queen</option>
                            <option value="rook">Rook</option>
                            <option value="bishop">Bishop</option>
                            <option value="knight">Knight</option>
                        </select>
                    </div>
                </div>

                <div class="loadout-slot selectable" data-slot="2">
                    <div class="slot-label">GUARD 2</div>
                    <div class="slot-piece" id="slot2-piece">♖</div>
                    <div class="slot-select">
                        <select id="slot2-select">
                            <option value="rook" selected>Rook</option>
                            <option value="queen">Queen</option>
                            <option value="bishop">Bishop</option>
                            <option value="knight">Knight</option>
                        </select>
                    </div>
                </div>

                <div class="loadout-slot selectable" data-slot="3">
                    <div class="slot-label">GUARD 3</div>
                    <div class="slot-piece" id="slot3-piece">♘</div>
                    <div class="slot-select">
                        <select id="slot3-select">
                            <option value="knight" selected>Knight</option>
                            <option value="queen">Queen</option>
                            <option value="rook">Rook</option>
                            <option value="bishop">Bishop</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="loadout-enemy-preview">
                <h3>ENEMY FORCES</h3>
                <div class="enemy-preview-pieces">
                    <span class="enemy-piece-preview">♜♞♝♛♚♝♞♜</span>
                    <span class="enemy-piece-preview">♟♟♟♟♟♟♟♟</span>
                </div>
                <p class="enemy-count">16 pieces - Full Chess Army</p>
            </div>

            <button id="start-battle-btn" class="start-battle-btn">START BATTLE</button>
        </div>
    </div>

    <div class="game-container" id="game-container" style="display: none;">
        <!-- LEFT: Chess Board -->
        <div class="board-column">
            <div class="board-wrapper">
                <div class="board" id="board"></div>
            </div>
        </div>

        <!-- RIGHT: Sidebar Dashboard -->
        <div class="game-sidebar">
            <header class="game-header">
                <h1>SPARTAN 300</h1>
                <div class="battle-info">
                    <span id="battle-number">4 vs 16</span>
                    <span id="turn-indicator">Your Turn</span>
                    <button id="help-btn" class="help-btn">?</button>
                </div>
            </header>

            <!-- Enemy Info -->
            <div class="enemy-info">
                <h3>ENEMY ARMY</h3>
                <span id="enemy-piece-count">16 pieces</span>
            </div>

            <!-- Enemy Intent Display -->
            <div class="enemy-intent" id="enemy-intent">
                <span>Projected: </span>
                <span id="intent-text">-</span>
            </div>

            <!-- Player Info -->
            <div class="player-info">
                <h3>YOUR ARMY</h3>
                <span id="player-piece-count">4 pieces</span>
            </div>

            <!-- Card Hand -->
            <div class="card-hand" id="card-hand">
                <!-- Cards will be inserted here by JS -->
            </div>

            <div class="card-instructions" id="card-instructions"></div>
        </div>

        <!-- Game Over Overlay -->
        <div class="overlay" id="game-over-overlay">
            <div class="overlay-content">
                <h2 id="game-over-text">Victory!</h2>
                <p id="game-over-subtext">You defeated the enemy army!</p>
                <div class="game-over-buttons">
                    <button id="restart-btn">Play Again</button>
                    <button id="change-squad-btn" class="secondary-btn">Change Squad</button>
                </div>
            </div>
        </div>

        <!-- How To Play Overlay -->
        <div class="overlay" id="help-overlay">
            <div class="overlay-content help-content">
                <button class="close-btn" id="close-help">&times;</button>
                <h2>How To Play</h2>

                <div class="help-section">
                    <h3>Goal</h3>
                    <p>Capture the enemy <span class="enemy-color">King</span> to win. Don't let them capture yours!</p>
                </div>

                <div class="help-section">
                    <h3>The Odds Are Against You</h3>
                    <p>You have a small army. The enemy has a full army. That's why you have <span
                            class="highlight">CHEAT CARDS</span>.</p>
                </div>

                <div class="help-section">
                    <h3>How To Move</h3>
                    <ul>
                        <li>Click one of your pieces (blue glow) to select it</li>
                        <li>Green dots show where you can move</li>
                        <li>Red squares show enemies you can capture</li>
                        <li>Click a valid square to move there</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>Chess Pieces</h3>
                    <div class="piece-guide">
                        <div class="piece-row"><span class="piece-symbol">♔</span> <strong>King</strong> - Moves 1
                            square any direction. Lose him = Game Over!</div>
                        <div class="piece-row"><span class="piece-symbol">♕</span> <strong>Queen</strong> - Moves any
                            direction, any distance. Most powerful!</div>
                        <div class="piece-row"><span class="piece-symbol">♖</span> <strong>Rook</strong> - Moves in
                            straight lines (up/down/left/right)</div>
                        <div class="piece-row"><span class="piece-symbol">♗</span> <strong>Bishop</strong> - Moves
                            diagonally</div>
                        <div class="piece-row"><span class="piece-symbol">♘</span> <strong>Knight</strong> - Moves in an
                            "L" shape, can jump over pieces</div>
                        <div class="piece-row"><span class="piece-symbol">♙</span> <strong>Pawn</strong> - Moves forward
                            1 (or 2 from start), captures diagonally</div>
                    </div>
                </div>

                <div class="help-section">
                    <h3>Your TACTICAL Cards</h3>
                    <p>You can play up to <strong>3 cards per battle</strong>. <span class="highlight">Playing a card
                            ends your turn</span> - you can't move AND play a card in the same turn!</p>
                    <div class="card-guide">
                        <div class="card-row"><span class="card-name-guide">Divine Shield</span> - Your piece cannot be
                            captured for 1 round</div>
                        <div class="card-row"><span class="card-name-guide">Knight's Jump</span> - All your pieces can
                            move like Knights this turn</div>
                        <div class="card-row"><span class="card-name-guide">Snipe</span> - Your ranged pieces can
                            capture through one obstacle</div>
                        <div class="card-row"><span class="card-name-guide">Caltrops</span> - Place a lethal trap on an
                            empty square (enemies die if they step on it)</div>
                        <div class="card-row"><span class="card-name-guide">Shield Bash</span> - Push an adjacent enemy
                            1 tile back; kills if they hit a wall or piece</div>
                    </div>
                </div>

                <div class="help-section">
                    <h3>Projected Move</h3>
                    <p>The red highlighted square shows where the enemy <strong>is likely to move</strong>. However, the
                        AI will <strong>re-evaluate</strong> after you move - it may change its mind to punish mistakes!
                    </p>
                </div>

                <div class="help-section tips">
                    <h3>Tips</h3>
                    <ul>
                        <li>The projected move is a forecast, not a promise - the AI adapts!</li>
                        <li>Place Caltrops where enemies want to move - trap their plans!</li>
                        <li>Diamond Form freezes your piece but makes it invulnerable</li>
                        <li>Knight's Jump lets you escape surrounded positions</li>
                        <li>Snipe through pawns to take out pieces behind them</li>
                        <li>Shield Bash enemies against walls or into your traps!</li>
                    </ul>
                </div>

                <button id="start-game-btn" class="start-btn">Got it, let's play!</button>
            </div>
        </div>
    </div>

    <!-- Custom AI System (must load before game.js) -->
    <script src="js/ai-system.js"></script>
    <script src="game.js"></script>
</body>

</html>